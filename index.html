<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Decode the Word</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Lexend:wght@400;600&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.ico">
</head>
<body>

    <div id="toast-container"></div>

    <header>
        <div class="header-top">
            <h1>Decode the Word</h1>
            <div class="header-actions">
                <button id="case-toggle" class="text-btn">abc</button>
                <button id="teacher-btn" class="icon-btn" title="Teacher Mode">ğŸ“</button>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label for="pattern-select">Focus:</label>
                <select id="pattern-select">
                    <option value="all">Mixed Review</option> 
                    <option value="cvc">CVC (Short Vowels)</option>
                    <option value="digraph">Digraphs (sh, ch)</option>
                    <option value="blend">Blends (st, bl)</option>
                    <option value="floss">FLOSS Rule</option>
                    <option value="magic-e">Magic E</option>
                    <option value="vowel-team">Vowel Teams</option>
                    <option value="r-controlled">R-Controlled</option>
                    <option value="prefix">Prefixes (un, re)</option>
                    <option value="suffix">Suffixes (ed, ing)</option>
                    <option value="doubling">Doubling (1-1-1)</option>
                    <option value="schwa">Schwa</option>
                    <option value="multisyllable">Multisyllable</option>
                </select>
            </div>

            <div class="control-group">
                <label for="length-select">Length:</label>
                <select id="length-select">
                    <option value="any">Any Length</option>
                    <option value="3">3 Letters</option>
                    <option value="4">4 Letters</option>
                    <option value="5" selected>5 Letters</option>
                    <option value="6">6 Letters</option>
                </select>
            </div>
            
            <button id="new-word-btn">New Word</button>
        </div>

        <div id="focus-info-panel" class="focus-panel">
            <div class="focus-header">
                <strong id="focus-title">Mixed Review</strong>
                <span id="focus-examples"></span>
            </div>
            <p id="focus-desc"></p>
            <p id="focus-hint" class="hint-text"></p>
        </div>
    </header>

    <main>
        <div id="game-board"></div>
        <div id="quick-tiles-row" class="quick-row hidden"></div>
        <div id="keyboard"></div>
        <div class="hint-actions">
            <button id="hear-word-hint" class="hint-btn">ğŸ”Š Hear Word</button>
            <button id="hear-sentence-hint" class="hint-btn">ğŸ“ Sentence Hint</button>
        </div>
        
        <!-- Advanced Feature Buttons (Teacher-controlled) -->
        <div id="feature-buttons-container" class="feature-buttons-container hidden">
          <button id="open-passage-btn" class="feature-btn">
            ğŸ“– Read a Passage
          </button>
          <button id="open-phoneme-btn" class="feature-btn">
            ğŸ”Š Practice Sounds
          </button>
        </div>
    </main>

    <div id="modal-overlay" class="modal-overlay hidden">
        <div id="modal" class="modal hidden">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h2 id="modal-title">Nice Try!</h2>
                <div id="modal-word">WORD</div>
                <div id="modal-syllables" class="syllable-hint"></div>
                <div class="definition-box">
                    <p id="modal-def"></p>
                    <p id="modal-sentence" class="sentence-example"></p>
                </div>
                <div class="modal-actions">
                    <button id="speak-btn" class="action-btn">ğŸ”Š Hear It</button>
                    <button id="play-again-btn" class="primary-btn">Play Again</button>
                </div>
            </div>
        </div>

        <div id="teacher-modal" class="modal hidden">
            <div class="modal-content teacher-content">
                <span class="close-teacher">&times;</span>
                <h2>Teacher Mode</h2>
                <p>Set a masked word (3-10 letters) for the student.</p>
                <div class="masked-input-container">
                    <input type="password" id="custom-word-input" placeholder="Enter secret word" autocomplete="off">
                    <button id="toggle-mask" type="button">ğŸ‘ï¸</button>
                </div>
                <p id="teacher-error" class="error-msg"></p>
                <button id="set-word-btn" class="primary-btn">Set Word & Play</button>
      <button id="open-studio-btn" class="primary-btn secondary">ğŸ™ï¸ Recording Studio</button>
      
      <div class="teacher-divider"></div>
      
      <div class="teacher-section">
        <h3>ğŸš€ Advanced Features</h3>
        
        <label class="teacher-checkbox">
          <input type="checkbox" id="enable-passages" />
          <span>Enable Passage Reading</span>
        </label>
        
        <label class="teacher-checkbox">
          <input type="checkbox" id="enable-phoneme-practice" />
          <span>Enable Sound Isolation Practice</span>
        </label>
        
        <label class="teacher-checkbox">
          <input type="checkbox" id="enable-mouth-positions" checked />
          <span>Show Mouth Position Guides (EAL support)</span>
        </label>
        
        <label class="teacher-checkbox">
          <input type="checkbox" id="show-ipa" />
          <span>Show IPA Symbols (Advanced)</span>
        </label>
      </div>
      
      <div class="teacher-divider"></div>
      
      <div class="teacher-section">
        <h3>ğŸŒ Translation Support (EAL)</h3>
        
        <label class="teacher-checkbox">
          <input type="checkbox" id="enable-translations" />
          <span>Enable Home Language Support</span>
        </label>
        
        <div id="language-selector" class="language-selector hidden">
          <label for="translation-language">Student's Home Language:</label>
          <select id="translation-language">
            <option value="">Select Language...</option>
            <option value="es">ğŸ‡ªğŸ‡¸ Spanish (EspaÃ±ol)</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ Mandarin (ä¸­æ–‡)</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ Arabic (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
            <option value="vi">ğŸ‡»ğŸ‡³ Vietnamese (Tiáº¿ng Viá»‡t)</option>
            <option value="tl">ğŸ‡µğŸ‡­ Tagalog (Tagalog)</option>
            <option value="pt">ğŸ‡§ğŸ‡· Portuguese (PortuguÃªs)</option>
            <option value="fr">ğŸ‡«ğŸ‡· French (FranÃ§ais)</option>
            <option value="hi">ğŸ‡®ğŸ‡³ Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€)</option>
          </select>
          
          <div class="translation-notice">
            <p>ğŸ“ <strong>Note:</strong> Translations will appear below English definitions to support understanding. Audio pronunciation in home language available.</p>
          </div>
        </div>
      </div>
            </div>
        </div>

        <div id="welcome-modal" class="modal hidden">
            <div class="modal-content welcome-content">
                <h2>Welcome! ğŸ‘‹</h2>
                <p>Let's practice decoding. Pick a focus and guess the secret word!</p>
                <ul class="welcome-steps">
                    <li>1. Pick a <strong>Phonics Focus</strong>.</li>
                    <li>2. Type your guess.</li>
                    <li>3. Green means <strong>Perfect</strong>!</li>
                </ul>
                <button id="start-playing-btn" class="primary-btn">Start Decoding</button>
            </div>
        </div>
    </div>
<script src="phonics_focus_data.js"></script>
  <script src="jokes_facts_quotes_bank.js"></script>
  <script src="script.js"></script>

  <!-- Teacher Recording Studio -->
  <div id="studio-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-content studio">
      <button id="close-studio" class="close-btn" aria-label="Close">Ã—</button>
      <h2>Teacher Recording Studio</h2>

      <div id="studio-setup-view">
        <div class="studio-row">
          <label for="studio-source-select">Word Source</label>
          <select id="studio-source-select">
            <option value="all">All Words</option>
            <option value="focus">Current Focus Only</option>
          </select>
        </div>

        <div class="studio-row">
          <label for="studio-mode-select">Recording Mode</label>
          <select id="studio-mode-select">
            <option value="both">Word + Sentence</option>
            <option value="word">Word Only</option>
            <option value="sentence">Sentence Only</option>
          </select>
        </div>

        <label class="studio-check">
          <input type="checkbox" id="studio-auto-advance" checked>
          Auto-advance after recording
        </label>
        <label class="studio-checkbox">
          <input type="checkbox" id="record-word-checkbox" checked>
          Record word
        </label>
        <label class="studio-checkbox">
          <input type="checkbox" id="record-sentence-checkbox" checked>
          Record sentence
        </label>


        <button id="studio-start-btn" class="primary-btn">Start Studio</button>
        <div id="studio-progress" class="muted"></div>
      </div>

      <div id="studio-record-view" class="hidden">
        <div class="studio-progress">
          <span id="studio-counter"></span>
          <button id="studio-exit-btn" class="text-btn">Exit</button>
        </div>

        <div class="studio-card">
          <div class="studio-word" id="studio-word-display"></div>
        </div>

        <div class="studio-grid">
          <div class="studio-card">
            <div class="studio-card-title">ğŸ“¢ Record Word</div>
            <div class="studio-actions">
              <button id="record-word-btn" class="record-btn">Record</button>
              <button id="play-word-preview" class="secondary-btn" disabled>â–¶ Preview</button>
            </div>
          </div>

          <div class="studio-card">
            <div class="studio-card-title">ğŸ“ Sentence (edit if needed)</div>
            <textarea id="studio-sentence-display" rows="3"></textarea>
            <div class="studio-actions">
              <button id="record-sentence-btn" class="record-btn">Record</button>
              <button id="play-sentence-preview" class="secondary-btn" disabled>â–¶ Preview</button>
            </div>
          </div>
        </div>

        <div class="studio-footer">
          <div id="recording-status" class="muted"></div>
          <button id="studio-next-btn" class="primary-btn">Next Word â†’</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Passage Reader Modal -->
  <div id="passage-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-content passage-reader">
      <button id="close-passage" class="close-btn" aria-label="Close">Ã—</button>
      <div class="passage-header">
        <h2 id="passage-title"></h2>
        <div class="passage-meta">
          <span id="passage-level" class="badge"></span>
          <span id="passage-focus" class="badge"></span>
        </div>
      </div>
      
      <div class="passage-controls">
        <button id="passage-play-btn" class="primary-btn">ğŸ”Š Listen</button>
        <button id="passage-highlight-btn" class="secondary-btn">ğŸ‘ Highlight Pattern</button>
        <button id="passage-questions-btn" class="secondary-btn">â“ Show Questions</button>
      </div>
      
      <div id="passage-text" class="passage-content">
        <!-- Text will be injected here -->
      </div>
      
      <div id="passage-questions" class="passage-questions hidden">
        <h3>ğŸ’­ Comprehension Questions:</h3>
        <ul id="questions-list"></ul>
      </div>
      
      <div id="passage-teaching" class="teaching-points">
        <h3>ğŸ“š Teaching Points:</h3>
        <ul id="teaching-list"></ul>
      </div>
      
      <div class="passage-footer">
        <button id="passage-another-btn" class="secondary-btn">ğŸ”„ Another Passage</button>
      </div>
    </div>
  </div>

  <!-- Phoneme Practice Modal -->
  <div id="phoneme-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-content phoneme-practice">
      <button id="close-phoneme" class="close-btn" aria-label="Close">Ã—</button>
      <h2>ğŸ”Š Sound Practice</h2>
      
      <div class="phoneme-word-display">
        <h3 id="phoneme-word"></h3>
        <p class="phoneme-instruction">Click each sound to hear it and learn how to make it</p>
      </div>
      
      <div class="phoneme-sounds-grid" id="phoneme-sounds">
        <!-- Individual sound buttons will be generated here -->
      </div>
      
      <div class="phoneme-articulation" id="phoneme-articulation">
        <p class="muted">ğŸ‘† Click a sound above to see how to make it</p>
      </div>
      
      <div class="phoneme-controls">
        <button id="phoneme-play-all" class="primary-btn">â–¶ Hear Whole Word</button>
        <button id="phoneme-slow-blend" class="secondary-btn">ğŸ¢ Slow Blend</button>
      </div>
    </div>
  </div>

  <!-- Feature Access Buttons (shown in main game area) -->
  <div id="feature-buttons" class="feature-buttons hidden">
    <button id="open-passage-btn" class="feature-btn">
      ğŸ“– Read a Passage
    </button>
    <button id="open-phoneme-btn" class="feature-btn">
      ğŸ”Š Practice Sounds
    </button>
  </div>

<script src="phonics_focus_data.js"></script>
  <script src="jokes_facts_quotes_bank.js"></script>
  <script src="decodable_passages.js"></script>
  <script src="phoneme_data.js"></script>
  <script src="translations.js"></script>
  <script src="script.js"></script>
</body>
</html>